---
title: 重构, 改善既有代码设计 - 第二版
URL: https://book-refactoring2.ifmicro.com/docs/
---

# 概念

Q1：什么是重构？

A1：重构（refactoring）是这样一个过程：在不改变代码外在行为的前提下，对代码做出修改，以改进程序的内部结构。

Q2：重构是一次性的吗？

A1：重构是多次重复的过程，在代码写好之后改进它的设计

Q3：重构的好处

A4：前期不断的重构，降低后续出错的概率

Q5：什么因素导致需要重构？

A5：需求的变化，导致需要重构。若是代码永远不会被修改，则不需要重构他

# 重构第一步

什么是好代码？

好代码的检验标准就是人们是否能轻而易举地修改它，有人需要修改代码时，他们应能轻易找到修改点，应该能快速做出更改，而不易引入其他错误

技巧：

一个 for 循环，和两个同级的 for 循环，大多数情况下，性能消耗类似，差距可以忽略不计。

思考：

1. 开始重构后，每一步修改后，都要记得跑一次测试用例，确定每一步的修改都是正确的。
   - 即小步修改，每次修改后就运行测试。
   - 避免修改太多，陷入测试的麻烦。
2. 变量命名。
   - 语义化
   - 优美，避免太长
   - 不能太通用，比如：format、make、readFile。尽量与业务、功能有关联性
3. 如果重构引入了性能损耗，先完成重构，再做性能优化。

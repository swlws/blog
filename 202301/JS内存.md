# JavaScript 的内存管理

JavaScript 是一个弱类型的、动态语言，在执行一段 JS 代码时，需要经历编译、执行、内存回收阶段。

# 编译阶段

JS 代码执行时，会首先创建`全局执行上下文`、以及`函数执行上下文`，上下文的执行顺序按照栈的方式进行调用，所以也叫做`函数调用栈`。

创建上下文时，会执行编译阶段，这一阶段会确定`作用域`，作用域确定了上下文有权限、且按一定的顺序访问的变量、函数。

进入一个上下文时，会经历`变量环境`的创建、初始化、赋值，这就导致了常见的变量提升问题。若是`ES6`环境时，还会额外多出词法环境，用于存储`ES6`的声明。

# 栈、堆

执行上下文存储于栈，引用对象存储于堆。

当碰见引用对象时，栈中存储的是对象在堆中的地址。所以会有这么一个现象：当将对象复制给一个变量时，修改另一个对象时，原对象的值也会发生变化。示例：

```js
var a = { name: "xxx" };
var b = a;
b.name = "yyy";

console.info(a); // {name: 'yyy'}
```

# 内存

JS 的内存分配是动态，不需要事先申请，同时内存也是自动释放、不需要手动释放。
